# Задание 1. Проектирование технологической архитектуры

## Стратегия масштабирования и отказоустойчивости

Исходя из задания, нам требуется получить систему с высокой отказоустойчивостью и высокой доступностью во всех регионах РФ. Для реализации необходимо:
1) Использовать фейловер-стратегию Active-Active, которая подходит для высоконагруженных систем с высокими требованиями к доступности и отказоустойчивости. Так же стратегия позволяет выполнять масштабирование с использованием ЦОД расположенных в других регионах. Мы планируем развернуть систему в 11 ЦОД, по одному на каждый часовой пояс.
2) Для распределением трафика между несколькими ЦОД используем GSLB (Global Server Load Balancer) — это балансировщик нагрузки, который способен направлять трафик между несколькими центрами обработки данных. Если происходит падение в одном из ЦОД, балансировщик перенаправляет пользователей на рабочие центры.
3) Для Kubernates планируем использовать горизонтальное масштабирование и несколько независимых кластеров, которые разворачиваются в границах разных ЦОД.
	Такое решение было принято по следующим причинам:
	1. Не у всех провайдеров (в том числе и Yandex) имеются ЦОД во всех 11 часовых поясах РФ
	2. Использование разных провайдеров обеспечивают большую отказоустойчивость, чем один провадер. Вариант, когда один кластер развернут во всех ЦОД, проигрывает по устойчивости.
	3. Позволит сэкономить бюджет, так как в большинстве регионов меньше население, чем в центре РФ, возможно развернуть первоначальную конфигурацию с меньшими требованиями по производительности и пропускной способности.
4) Для масштабирование БД PostgreSQL будем использовать Patroni, который позволит синхронизировать базы разных при помощи потоковой репликации. Используем вариант master-master. При проблем с одной из баз, HAProxy направит данные в другие базы кластера. Шардирование не планируется, так как объем данных не большой (50 GB) и нагрузка пользователей будет распределена по регионам. Проблема с нагрузкой на чтение должны решится после ограничения одного из клиентов при помощи Rate Limiting 

